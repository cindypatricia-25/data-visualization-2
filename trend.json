{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "data//trend.csv"
    },
    "vconcat": [
      {
        "width": 480,
        "mark": {
          "type": "line",
            "point": true
        },
        "params": [{
    "name": "legendselect",
    "select": {"type": "point", "fields": ["STATE_NAME"]},
    "bind": "legend"
  }],
        "encoding": {
          "x": {
            "field": "YearMonth",
            "type": "temporal",
            "axis": {"title": "Year-Month"},
            "scale": {"domain": {"param": "brush"}}
          },
          "y": {
            "field": "Count_of_Crash",
            "type": "quantitative",
            "title": "Crash Count"
          },
          "color": {
            "field": "STATE_NAME",
            "type": "nominal",
            "title": "State",
            "legend": {"title": "State"} 
          },
          "opacity": {
      "condition": {"param": "legendselect", "value": 1},
      "value": 0.2
    }
        },
        "transform": [
          {
            "calculate": "toDate(datum.Year + '-' + datum.Month + '-01')",
            "as": "YearMonth"
          }
        ]
      },
      {
        "width": 480,
        "height": 60,
        "mark": "line",
        "params": [
          {
            "name": "brush",
            "select": {"type": "interval", "encodings": ["x"]}
          }
        ],
        "encoding": {
          "x": {
            "field": "YearMonth",
            "type": "temporal",
            "axis": {"title": "Year-Month"}
          },
          "y": {
            "field": "Count_of_Crash",
            "type": "quantitative",
            "axis": {"tickCount": 3, "grid": false},
            "title": null
          },
          "color": {
            "field": "STATE_NAME",
            "type": "nominal",
            "legend": null
          },
          "opacity": {
      "condition": {"param": "legendselect", "value": 1},
      "value": 0.2
    }
        },
        "transform": [
          {
            "calculate": "toDate(datum.Year + '-' + datum.Month + '-01')",
            "as": "YearMonth"
          }
        ]
      }
    ]
  }
  